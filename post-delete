#!/usr/bin/env python3

import subprocess
import sys
from urllib.parse import urlparse
import os
from drop_mongodb_database import drop_mongodb_database
from utils import pip_install

APP= sys.argv[1] if len(sys.argv) >1 else None

if __name__ == "__main__":
    pip_install("python-dotenv")
    from dotenv import load_dotenv
    load_dotenv()
    mongodb_url = os.environ.get("APP_MONGODB_URL")  # Read MongoDB URL from environment variable leave
    cfa_app_name = os.environ.get("CFA_APP_NAME")
    if cfa_app_name == APP:
        if mongodb_url is None:
            print("APP_MONGODB_URL environment variable not set.")
        else:
            delete_mongodb_database(mongodb_url)